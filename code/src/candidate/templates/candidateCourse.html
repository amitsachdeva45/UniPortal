{% extends 'candidateLayout.html' %}

{% block content %}
    <div class="col-lg-12 col-xs-12 col-sm-12 col-md-12 candidate-home-main">
        <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 candidate-course-home">
            <div class="col-lg-12 col-xs-12 col-sm-12 col-md-12" style="border: 1px solid white;">
                <form action="" method="POST" id = "selectCandidateCourse">
                    {% csrf_token %}
                    <div class="col-lg-12 col-xs-12 col-sm-12 col-md-12">
                      <select name="semester" id ="semester" style="width:100%; height: 40px; color: white; background-color: #666; margin-top:10px; ">
                          <option value="1">Semester 1</option>
                          <option value="2">Semester 2</option>
                          <option value="3">Semester 3</option>
                          <option value="4">Semester 4</option>
                      </select>
                   </div>
                    <div class="col-lg-12 col-xs-12 col-sm-12 col-md-12">
                      <button type="submit" style="width:50%; color: white; background-color: black; border: 0px; margin-left: 20%;">Submit</button>
                   </div>
                </form>
            </div>
            <div class="col-lg-12 col-xs-12 col-sm-12 col-md-12"  id="selectedCourses">

            </div>
        </div>
        <div class="col-lg-6 col-xs-6 col-sm-6 col-md-6 candidate-course-home" style="background-color:green;">
cc
        </div>
    </div>
<script type="text/javascript">
    $( window ).on( "load", function() {
        submitSelectedCourse();
    });
    $(document).on('submit','#selectCandidateCourse', function(e) {
        e.preventDefault();
        submitSelectedCourse();
    });
    function submitSelectedCourse() {
        $.ajax({
            type: 'POST',
            url: '/candidate/fetchCourse/',
            data: {
                       semester: $("#semester").val()?$("#semester").val():1,
                       csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                  },
                  success: function(json) {
                    var final_html = "";
                    for(var i=0; i<json.length; i++)
                    {
                        final_html += '<div class="col-lg-12 col-xs-12 col-sm-12 col-md-12" style="border:1px solid black; margin-top:10px; color:#333; background-color:#999;">';
                        final_html += '<h5><strong>Course Name: </strong>'+json[i]['course_name']+'</h5>';
                        final_html += '<h6><strong>Course Description: </strong>'+json[i]['description']+'</h6>';
                        if(json[i]['status'] == 'complete')
                        {
                           final_html += '<h6 style="color:green"><strong>Status: </strong> Complete</h6>';
                        }
                        else
                        {
                            final_html += '<h6 style="color:red"><strong>Status: </strong>Pending</h6>';
                        }

                        final_html += '</div>';
                    }
                    $("#selectedCourses").html(final_html);
                  }
        });
    }
</script>
{% endblock %}